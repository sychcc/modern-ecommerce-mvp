<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Product card</title>

    <!--google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="/assets/images/favicon.svg" />
    <!--CSS-->
    <link rel="stylesheet" href="../../styles/main.css" />
    <!-- React -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <!-- React 會渲染到這個div裡 -->
    <div id="root"></div>

    <!-- React 組件代碼 -->
    <script type="text/babel">
      // ProductCard 組件
      const ProductCard = ({ product }) => {
        const colors = product?.colors || [];
        const [selectedColor, setSelectedColor] = React.useState(
          colors[0] || null
        );

        const handleColorChange = (color) => {
          setSelectedColor(color);
        };

        const getColorDisplayName = (color) => {
          if (!color) return "";
          return color.charAt(0).toUpperCase() + color.slice(1);
        };

        if (!product) return null;

        return (
          <article className="product-card">
            <div className="product-card__image">
              <img
                src={product.image || ""}
                alt={product.name || "Product"}
                onError={(e) => {
                  e.target.src =
                    "https://via.placeholder.com/300x300?text=No+Image";
                }}
              />
            </div>

            <div className="product-card__content">
              {selectedColor && (
                <div className="product-card__color-label">
                  {getColorDisplayName(selectedColor)}
                </div>
              )}

              <h3 className="product-card__name">
                {product.name || "Unknown Product"}
              </h3>

              <div className="product-card__price">
                <span className="price-current">${product.price || 0}</span>
                {product.originalPrice && (
                  <span className="price-original">
                    ${product.originalPrice}
                  </span>
                )}
              </div>

              {colors.length > 0 && (
                <div className="product-card__colors">
                  {colors.map((color, index) => (
                    <button
                      key={index}
                      className={`color-swatch ${
                        selectedColor === color ? "color-swatch--selected" : ""
                      }`}
                      data-color={color}
                      onClick={() => handleColorChange(color)}
                      title={getColorDisplayName(color)}
                    />
                  ))}
                </div>
              )}
            </div>
          </article>
        );
      };

      // ProductGrid 組件
      const ProductGrid = () => {
        const products = [
          {
            id: "urban-drift-bucket-hat",
            name: "Urban Drift Bucket Hat",
            price: 15,
            originalPrice: null,
            image: "/assets/images/product_pic/urban_hat.png",
            colors: ["black", "white"],
          },
          {
            id: "tangerine-mini-tote",
            name: "Tangerine Mini Tote",
            price: 150,
            originalPrice: null,
            image: "/assets/images/product_pic/mini_tote.png",
            colors: ["orange"],
          },
          {
            id: "elemental-sneakers",
            name: "Elemental Sneakers",
            price: 80,
            originalPrice: 100,
            image: "/assets/images/product_pic/sneakers.png",
            colors: ["beige"],
          },
          {
            id: "metro-hoodie",
            name: "Metro Hoodie",
            price: 81,
            originalPrice: 90,
            image: "/assets/images/product_pic/voyager.png",
            colors: ["black"],
          },
          {
            id: "sunbeam-mules",
            name: "Sunbeam Mules",
            price: 68,
            originalPrice: 85,
            image: "/assets/images/product_pic/heels.png",
            colors: ["yellow"],
          },
          {
            id: "azure-attitude-shades",
            name: "Azure Attitude Shades",
            price: 45,
            originalPrice: null,
            image: "/assets/images/product_pic/attitude_shades.png",
            colors: ["blue"],
          },
          {
            id: "voyager-hoodie",
            name: "Voyager Hoodie",
            price: 76,
            originalPrice: 95,
            image: "/assets/images/product_pic/voyager.png",
            colors: ["green", "brown"],
          },
          {
            id: "la-baseball-hat",
            name: "LA Baseball Hat",
            price: 20,
            originalPrice: null,
            image: "/assets/images/product_pic/baseball_hat.png",
            colors: ["black"],
          },
        ];

        return (
          <div className="product-grid-container">
            <h2 className="product-grid-title">Latest Arrivals</h2>
            <div className="product-grid">
              {products.map((product) => (
                <ProductCard key={product.id} product={product} />
              ))}
            </div>
          </div>
        );
      };

      // 渲染到頁面
      ReactDOM.render(<ProductGrid />, document.getElementById("root"));
    </script>
  </body>
</html>
